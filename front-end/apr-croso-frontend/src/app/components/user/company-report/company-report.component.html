<nav-bar></nav-bar>
<div class="report-container">
  
    <!-- Finansijski izveštaj --> 
    <h2>Podnošenje finansijskih izveštaja</h2>
    <form [formGroup]="financialReportForm" (ngSubmit)="onSubmitFinancialReport()">
      <div>
        <label for="companyName">Naziv Kompanije</label>
                <select id="companyName" formControlName="companyName">
                    <option value="">-- Izaberite kompaniju --</option>
                    <option *ngFor="let company of companies" [value]="company.name">
                        {{ company.name }}
                    </option>
                </select>
      </div>
      <div>
        <label for="pib">PIB:</label>
        <input id="pib" formControlName="pib" required type="number">
      </div>
      <br>
      <div>
        <label for="year">Godina:</label>
        <input type="number" id="year" formControlName="year" required>
      </div>
      <div>
        <label for="balanceSheet">Bilans Stanja:</label>
        <input id="balanceSheet" type="number" formControlName="balanceSheet" required min="0">
      </div>
      <div>
        <label for="incomeStatement">Bilans Uspeha:</label>
        <input id="incomeStatement" type="number" formControlName="incomeStatement" required min="0">
      </div>
      <button type="submit" [disabled]="!financialReportForm.valid">Podnesi izveštaj</button>
    </form>
    
    <div *ngIf="financialReportSubmitted">
      <h3>Podaci o finansijskom izveštaju:</h3>
      <p><strong>Kompanija:</strong> {{ financialReportData.companyName }}</p>
      <p><strong>PIB:</strong>{{ financialReportData.pib }}</p>
      <p><strong>Godina:</strong> {{ financialReportData.year }}</p>
      <p><strong>Bilans Stanja:</strong> {{ financialReportData.balanceSheet }}</p>
      <p><strong>Bilans Uspeha:</strong> {{ financialReportData.incomeStatement }}</p>
    </div>
  
    <!-- Stečaj i likvidacija -->
    <h2>Podnošenje prijava za stečaj i likvidaciju</h2>
    <form [formGroup]="bankruptcyForm" (ngSubmit)="onSubmitBankruptcy()">
      <div>
        <label for="companyName">Naziv Kompanije</label>
                <select id="companyName" formControlName="companyName">
                    <option value="">-- Izaberite kompaniju --</option>
                    <option *ngFor="let company of companies" [value]="company.name">
                        {{ company.name }}
                    </option>
                </select>
      </div>
      <div>
        <label for="pibBankruptcy">PIB:</label>
        <input id="pibBankruptcy" formControlName="pib" type="number" required>
      </div>
      <br>
      <div>
        <label for="bankruptcyDate">Datum početka stečaja:</label>
        <input type="date" id="bankruptcyDate" formControlName="bankruptcyDate" required>
      </div>
      <div>
        <label for="liquidation">Podnošenje likvidacije:</label>
        <input type="checkbox" id="liquidation" formControlName="liquidation">
      </div>
      <button type="submit" [disabled]="!bankruptcyForm.valid">Podnesi prijavu</button>
    </form>
  
    <div *ngIf="bankruptcySubmitted">
      <h3>Podaci o stečaju i likvidaciji:</h3>
      <p><strong>Kompanija:</strong> {{ bankruptcyData.companyName }}</p>
      <p><strong>PIB:</strong>{{ bankruptcyData.pib }}</p>
      <p><strong>Datum početka stečaja:</strong> {{ bankruptcyData.bankruptcyDate }}</p>
      <p><strong>Likvidacija:</strong> {{ bankruptcyData.liquidation ? 'Da' : 'Ne' }}</p>
    </div>


    <!-- ***********REPORTS LIST*********** -->
    <div class="reports-container">
  <button class="refresh-btn" (click)="reloadReports()">🔄 Osveži</button>

  <div *ngIf="financialReportData?.length > 0" class="report-section">
    <h3>📊 Moji finansijski izveštaji:</h3>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Kompanija</th>
          <th>PIB</th>
          <th>Godina</th>
          <th>Bilans Stanja</th>
          <th>Bilans Uspeha</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of financialReportData">
          <td>{{ report.companyName }}</td>
          <td>{{ report.pib }}</td>
          <td>{{ report.year }}</td>
          <td>{{ report.balanceSheet }} $</td>
          <td>{{ report.incomeStatement }} $</td>
          <td>
            <span [ngClass]="report.valid ? 'status-approved' : 'status-pending'">
              {{ report.valid ? '✔ Odobren' : '⏳ Na čekanju' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="bankruptcyData?.length > 0" class="report-section">
    <h3>⚖ Moje prijave za stečaj/likvidaciju:</h3>
    <table class="styled-table">
      <thead>
        <tr>
          <th>Kompanija</th>
          <th>PIB</th>
          <th>Datum stečaja</th>
          <th>Likvidacija</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of bankruptcyData">
          <td>{{ b.companyName }}</td>
          <td>{{ b.pib }}</td>
          <td>{{ b.bankruptcyDate }}</td>
          <td>{{ b.liquidation ? 'Da' : 'Ne' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  

  


  </div>
  
